<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9999</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Balance
//ссыль на форум, где чел вытаскивает название валюты из айос:
//https://forum.yoyogames.com/index.php?threads/get-users-currency.19018/

//рейтинг гугла
//CgkIrMeq8roWEAIQAQ

facebook_init();
//   app id   251484648699009
GoogleAnalytics_Init("UA-104536876-1",0);

//  AdMob
//инициация гагловской рекламы
//Идентификатор приложения: ca-app-pub-8625657083780151~5039073221
//Interstitial between levels   ca-app-pub-8625657083780151/6638740135
//Rewarded video for Free Spin  ca-app-pub-8625657083780151/9236983310
GoogleMobileAds_Init('ca-app-pub-8625657083780151/6638740135');
GoogleMobileAds_LoadInterstitial();
//alarm[5]=room_speed*5;

//  AdColony
//Your application ID: app35105de8407946a49e
//Your app secret key: v4vca1ba430745104f579c
//V4VC Secret Key: v4vca1ba430745104f579c
//    Rewarded video: Free Spin
//    Zone ID: vz3551120656da4177b0
//        Rewarded video: Many Gems 
//        Zone ID: vz8014a6baa430408ab3
//    Rewarded video: Few Gems 
//    Zone ID: vz12f4f206e5e84f41b0
//        Rewarded video: Random Bonus
//        Zone ID: vz6e006bbf82434a00a6
trys2=0;
AppId = "app35105de8407946a49e";
ZoneId = "vz3551120656da4177b0";
ZoneId2 = "vz8014a6baa430408ab3";
V4VCZoneId = "v4vca1ba430745104f579c";
AdColony_Init(AppId, ZoneId, V4VCZoneId);

//гугловский лидерборд
leaderboard_logged=0;

ad_place=0;
// 1-фри спин
// 2-камни
// 3-случайный бонус
// 4-дополнительное время
//когда вызываем рекламу, менять этот параметр. ее ж не вызвать два раза одновременно?
//потом ништяки даются в зависимости от него

//эти стринги становятся большими арреями, которые уровни смотрят при создании
difficulty_wave = 25;
min_dif = 0.7;
max_dif = 1.7; 

var str_file_items='64 109 161 253 112 121 56 138 149 43 29 101 210 257 278 130 250 56 180 126 238 177 132 98 157 80 80 25 118 114 95 58 58 145 220 143 134 372 271 104 103 122 187 77 199 29 403 148 169 24 95 55 52 55 58 61 49 107 59 135 61 61 60 58 71 204 70 149 93 88 64 74 75 59 273 136 62 40 71 54 72 63 200 74 77 17 72 82 69 136 53 71 88 214 115 85 221 72 70 63 216 63 152 180 147 83 100 107 88 27 110 59 52 124 178 83 144 73 95 121 128 72 234 100 103 82 115 56 111 109 164 128 101 226 104 83 169 138 36 102 90 93 125 167 109 122 135 144 147 87 158 89 86 130 180 210 33 117 202 123 146 192 122 227 38 99 48 89 134 208 154 160 90 183 275 100 191 156 126 237 95 127 169 95 155 181 190 109 207 90 99 135 113 108 167 81 63 121 207 45 119 167 191 158 146 221 218 98 197 142 186 102 214 127 145 58 106 178 185 162 44 204 155 123 43 221 215 52 207 234 141 110 199 115 43 213 76 207 158 119 147 243 98 65 216 87 126 222 144 217 225 195 222 126 178 144 156 234 128 77 171 215 236 211 160 216 131 84 230 239 146 188 236 186 79 127 118 102 179 177 186 187 136 246 249 52 149 252 132 110 202 252 263 215 63 279 200 156 305 63 117 120 116 282 280 199 183 165 151 252 165 172 162 179 319 183 280 294 146 153 204 207 53 83 179 58 115 213 221 269 309 171 166 227 153 114 275 192 149 287 165 252 231 304 307 135 279 139 148 251 69 241 320 228 270 285 245 150 218 93 238 129 211 125 63 170 237 102 228 324 172 225 300 94 329 188 227 153 322 35 172 179 254 78 372 135 283 77 154 175 265 318 228 65 206 232 372 353 343 98 76 53 380 290 63 221 276 76 210 245 183 240 296 214 189 199 87 120 211 361 367 218 114 121 398 200 220 182 204 394 249 125 246 192 413 152 286 196 255 390 134 355 195 307 94 185 423 170 418 326 54 154 308 106 288 76 216 355 336 277 260 222 389 253 108 345 311 146 202 170 300 184 261 55 283 299 82 209 49 204 102 231 279 238 122 232 397 269 355 253 82 379 174 434 142 202 399 332 215 352 397 376 280 318 418 357 54 288 323 330 242 276 339 112 398 122 56 164 343 442 94 330 104 121 292 445 430 293 127 240 123 259 351 467 447 472 102 124 82 106 260 182 50 203 252 62 374 164 162 108 368 241 82 210 427 241 87 370 115 363 137 133 339 425 323 265 387 420 284 88 270 131 441 417 192 445 202 170 160 345 413 372 315 141 170 214 115 332 301 495 221 374 216 490 169 390 325 139 274 171 161 314 342 261 402 345 109 333 260 262 108 447 152 152 62 285 348 124 198 469 191 194 425 247 438 209 181 93 457 418 481 200 434 187 85 164 498 94 316 224 106 215 47 100 493 473 102 356 62 116 141 471 61 204 327 441 415 183 125 258 392 88 326 180 131 409 168 258 180 264 218 388 56 444 227 383 122 164 97 473 78 469 412 93 164 137 155 340 526 172 136 326 435 525 56 454 74 283 288 266 441 108 560 96 464 151 194 98 500 69 175 515 305 220 122 410 284 351 70 484 478 559 84 125 310 108 568 410 352 94 128 383 336 331 101 215 278 76 95 178 202 486 318 194 311 554 171 223 537 267 168 112 337 239 480 154 135 236 417 296 230 152 267 387 130 438 93 381 100 122 244 588 307 97 209 58 495 573 181 106 136 44 60 105 181 299 177 522 566 527 434 121 502 230 99 205 557 559 82 379 164 132 86 359 327 146 445 83 496 186 355 462 514 556 457 367 467 372 199 120 64 253 74 354 150 284 128 424 281 115 176 131 439 482 574 446 275 577 67 60 498 323 213 257 428 601 272 401 203 260 475 121 548 352 168 58 359 200 557 124 208 566 443 341 390 333 333 91 522 91 171 214 331 114 557 54 149 438 551 358 108 106 109 431 457 519 214 594 363 523 69 470 553 427 174 271 576 134 376 165 105 76 37 544 616 45 493 53 306 479 192 123 382 553 91 197 312 593 79 434 88 77 371 98 306 136 115 620 111 93 489 343 439 482 65 206 74 414 510 629 591 544 197 614 374 146 158 573 550 171 349 369 65 75 193 184 551 532 204 558 176 109 77 579 69 116 113 200 117 78 166 67 92 203 319 446 533 296 506 562 609 77 306 599 118 605 91 73 369 77 368 484 420 158 194 368 317 157 559 115';
var str_file_time='120 130 140 180 150 78 36 116 125 36 19 64 176 166 180 152 162 35 151 81 155 149 85 62 101 50 50 14 74 72 109 35 47 93 144 91 156 441 177 86 64 78 157 48 167 16 480 124 109 24 59 31 30 31 44 35 53 68 44 159 33 33 64 31 80 132 39 95 107 101 35 41 84 31 179 159 33 20 52 30 39 33 130 39 81 13 56 88 53 84 57 37 95 138 70 46 142 37 35 42 139 46 126 151 92 64 56 60 99 13 62 30 25 144 149 43 89 74 55 68 77 38 151 106 109 41 86 39 83 60 103 72 54 146 56 62 106 84 32 54 101 48 70 104 58 72 77 83 90 95 129 43 41 72 149 176 14 124 169 131 159 120 89 145 11 68 45 57 72 174 87 91 88 108 179 68 119 120 73 151 43 73 187 43 169 112 112 54 131 47 65 78 56 120 128 74 62 62 174 13 60 102 112 87 116 140 138 107 116 102 106 46 126 143 84 32 48 99 103 95 35 118 83 67 19 130 126 15 127 139 99 70 114 61 18 124 49 233 115 116 115 145 69 61 244 40 68 175 72 126 132 215 138 83 97 148 81 139 60 77 91 124 188 120 92 244 148 36 134 139 148 101 137 201 77 81 59 106 142 187 136 99 62 143 282 11 82 147 127 117 164 147 155 120 18 178 119 77 186 17 57 109 56 180 224 118 95 115 172 198 93 97 90 142 197 106 178 178 78 102 110 112 20 48 142 11 54 116 167 170 253 85 93 139 117 121 318 138 112 332 79 145 142 184 360 69 166 102 94 196 59 149 263 139 171 170 190 80 118 35 132 63 173 136 50 173 146 65 172 385 83 136 180 93 203 108 124 115 197 11 96 87 145 70 236 66 328 69 81 83 153 194 139 12 108 126 236 221 413 98 67 14 242 339 24 118 161 66 124 152 103 132 240 112 198 212 28 54 110 305 232 114 48 130 257 212 116 123 103 254 156 56 153 93 269 173 230 113 143 250 64 223 205 184 90 104 277 92 273 271 12 79 367 66 170 64 157 223 207 159 165 162 250 141 42 215 256 106 141 131 178 123 166 33 332 178 20 149 25 99 101 141 222 265 52 172 347 153 303 160 72 473 94 386 68 117 261 279 108 300 259 469 328 192 275 305 29 168 392 402 183 219 287 43 261 50 32 85 213 397 50 203 104 50 172 300 288 172 54 149 51 165 300 319 302 323 58 82 71 106 143 145 22 118 137 14 240 85 84 38 236 180 69 124 286 180 78 238 43 232 96 92 420 283 197 206 252 378 163 19 176 56 579 279 157 586 117 89 121 431 275 326 190 65 90 128 42 205 178 348 240 242 233 343 89 257 402 63 155 90 122 261 292 143 267 434 36 207 143 171 110 415 74 180 37 166 441 82 166 632 158 162 565 188 302 180 101 47 618 286 341 119 582 107 76 87 480 24 194 247 109 133 16 56 475 337 32 232 12 45 68 337 38 125 284 600 288 106 142 145 360 82 207 104 94 283 138 176 105 151 140 265 32 611 148 261 52 91 55 660 12 341 561 26 135 166 83 445 395 99 66 211 604 527 33 331 29 172 176 155 319 41 430 99 457 81 174 103 501 55 152 741 392 147 55 294 243 238 57 692 358 434 19 58 402 42 445 397 240 99 97 365 308 221 36 145 237 34 31 110 134 493 209 126 203 437 104 154 422 161 102 79 313 286 368 131 172 169 593 385 163 88 227 279 66 632 31 370 38 59 178 478 203 35 145 13 389 466 118 44 74 17 16 124 170 197 115 553 610 798 331 60 399 168 38 144 603 605 45 540 103 109 26 259 228 86 346 23 397 126 347 364 416 459 480 269 370 370 141 156 54 321 36 257 136 186 70 329 184 57 170 73 660 738 484 354 248 488 61 19 408 310 159 332 337 515 360 310 149 230 387 65 463 352 114 46 269 147 886 169 156 484 475 250 302 242 476 62 441 108 119 164 242 60 896 13 97 678 474 271 54 52 55 350 377 443 167 689 540 449 13 522 482 348 179 250 507 83 294 116 85 85 11 476 552 26 422 40 221 408 147 175 304 488 39 153 452 534 26 362 110 24 394 129 223 88 66 567 61 71 798 357 370 787 66 166 21 656 840 581 540 488 158 567 302 147 164 523 499 130 370 298 33 87 155 145 935 482 168 949 137 62 92 536 77 70 67 165 72 28 180 16 123 170 334 519 490 221 459 523 757 53 316 567 75 575 74 88 306 28 410 439 366 122 163 589 248 121 694 73';
var str_file_types='3 3 3 3 1 3 3 2 2 2 3 3 2 3 3 1 3 3 2 3 3 2 3 3 3 3 3 3 3 3 1 3 2 3 3 3 1 1 3 2 3 3 2 3 2 3 1 2 3 1 3 3 3 3 2 3 1 3 2 1 3 3 1 3 1 3 3 3 1 1 3 3 1 3 3 1 3 3 2 3 3 3 3 3 1 1 2 1 2 3 1 3 1 3 3 3 3 3 3 2 3 2 2 2 3 2 3 3 1 2 3 3 3 1 2 3 3 1 3 3 3 3 3 1 1 3 2 2 2 3 3 3 3 3 3 2 3 3 1 3 1 3 3 3 3 3 3 3 3 1 2 3 3 3 2 2 2 1 2 1 1 3 2 3 3 2 1 2 3 2 3 3 1 3 3 2 3 2 3 3 3 3 1 3 1 3 3 3 3 3 2 3 3 1 2 1 1 3 2 3 3 3 3 3 2 3 3 1 3 2 3 3 3 1 3 2 3 3 3 3 1 3 3 3 2 3 3 3 3 3 2 2 3 3 2 3 2 1 2 1 2 3 2 1 1 3 3 2 3 3 3 1 3 2 3 1 3 3 3 1 3 3 2 3 3 1 1 3 3 3 1 3 3 1 1 2 3 1 2 1 2 3 3 3 1 3 3 3 1 1 2 3 3 3 3 3 3 3 3 3 3 1 3 3 2 3 3 2 1 2 3 3 3 2 3 3 3 3 3 2 3 3 2 2 3 3 3 3 2 3 2 3 3 3 2 1 1 2 2 1 3 3 3 3 1 3 3 2 2 2 1 3 2 3 3 3 2 3 3 3 3 3 2 1 1 1 3 2 2 1 3 3 3 1 3 3 3 2 3 1 3 3 3 3 3 3 1 1 3 3 3 3 3 3 3 3 3 3 1 1 1 2 3 1 2 3 3 1 3 3 3 3 2 3 1 1 3 3 3 2 3 3 3 1 3 1 3 2 3 3 3 3 3 3 3 1 2 3 3 3 3 3 1 3 1 3 3 3 3 2 2 3 1 2 3 1 2 3 3 3 3 2 3 3 3 3 2 2 2 2 3 2 3 1 1 3 3 2 1 3 1 3 2 1 3 2 2 3 2 3 1 1 3 2 3 3 3 2 3 2 3 1 1 3 3 2 1 3 1 1 2 2 2 3 3 3 1 3 3 2 2 3 1 3 3 3 3 3 3 3 3 3 2 3 3 3 2 2 1 1 3 2 1 3 3 2 3 3 3 3 3 2 1 3 3 2 1 3 3 3 2 2 1 3 3 2 3 2 3 3 3 3 1 3 2 1 3 3 2 1 3 2 3 3 3 3 3 3 3 3 1 3 1 3 3 3 1 3 3 3 2 2 2 3 3 1 3 3 3 3 1 2 3 1 1 3 1 2 2 1 2 2 1 2 3 2 3 2 1 3 3 3 1 3 1 3 2 3 3 1 1 3 1 2 2 3 3 3 2 3 3 3 1 3 2 1 3 3 1 3 2 1 3 3 2 3 2 3 3 3 3 3 1 1 3 3 3 3 2 1 3 3 1 3 2 1 3 1 3 3 3 3 1 2 1 3 2 3 3 3 3 3 3 1 2 3 2 1 2 1 2 1 1 3 3 3 2 3 1 1 3 3 3 3 1 3 3 2 3 1 2 2 2 3 3 3 2 2 3 3 3 2 3 3 3 3 3 3 3 3 3 2 2 1 3 2 1 3 1 1 3 3 2 3 3 1 3 2 3 3 3 3 3 3 3 2 3 3 3 3 3 1 2 1 2 3 3 2 2 1 3 3 3 3 3 3 2 2 2 1 3 2 3 3 3 3 3 3 3 3 2 3 3 3 2 3 3 2 3 1 1 1 2 3 2 3 3 3 3 3 2 3 1 1 3 3 2 3 1 2 3 2 3 1 3 3 1 3 3 2 3 3 3 2 3 1 3 3 1 1 3 3 2 3 3 3 1 2 3 1 3 3 3 3 1 2 3 1 3 3 3 3 3 3 3 3 3 2 1 3 3 2 3 3 2 2 3 3 3 3 2 1 1 3 3 1 3 1 3 3 3 1 3 3 3 3 1 3 3 3 1 3 2 1 3 3 3 3 3 2 1 2 3 1 1 3 3 1 1 3 3 3 3 3 3 2 2 3 3 3 2 3 2 1 3 3 1 3 3 1 3 3 1 3 1 3 3 3 3 3 2 3 1 3 2 2 3 3 3 3 2 2 2 3 3 3 2 1 3 3 2 3 3 3 3 1 3 3 2 3';
//41 70 104 163 130 - первые 5 таймов

balance_items[1000]=0;
balance_time[1000] =0;
balance_types[1000]=0;

var i, file;
file = file_text_open_from_string(str_file_items);
for (i = 0; i &lt; 1000; i += 1){
    balance_items[i+1] = file_text_read_real(file);
}
file_text_close(file);

var i, file;
file = file_text_open_from_string(str_file_time);
for (i = 0; i &lt; 1000; i += 1){
    balance_time[i+1] = file_text_read_real(file);
}
file_text_close(file);

var i, file;
file = file_text_open_from_string(str_file_types);
for (i = 0; i &lt; 1000; i += 1){
    balance_types[i+1] = file_text_read_real(file);
}
file_text_close(file);

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///MAIN
/*
В этом объекте все прокачки, ресурсы, может быть цены,
чтобы не искать и не делать их глобальными. Главное 
все время его сразу включать после деактивейта, как мтф.
*/
/////////////
/////////////    СЛУЖЕБНЫЕ
/////////////
first=0;
global.spd=60/room_speed;
language=1;
switch (os_get_language()) {
    case "en": language=0; break;
    case "ru": language=1; break;
    case "fr": language=2; break;
    case "de": language=3; break;
    case "ko": language=4; break;
    default:   language=0; break;
}
//language=4;
fb_connected=0;

//названия для аналитики
screen_name[0]= 'Gameplay';
screen_name[1]= 'Shop';
screen_name[2]= 'Upgrades';
screen_name[3]= 'Level Select';
screen_name[4]= 'Chests';
screen_name[5]= 'Rating';
screen_name[6]= 'Shop (inner)';
screen_name[7]= 'Quests';
screen_name[8]= 'More games';
screen_name[9]= 'Gifts';
screen_name[10]='Promo codes';
screen_name[11]='Feedback';

screen_name[20]='Gameplay - Lose';
screen_name[21]='Gameplay - Win';

fb_gifts_checked = 0;

tutorial=1;
surface_list=ds_list_create();
custom=0
time_start=30;
level_rewarded=0;
level_played=0;
level_passed=1;
show_feedback_popup=1;
//поддерживаются ли шейдеры
shader_supported=shaders_are_supported();
if os_type=os_android and os_version&lt;=19 shader_supported=0; 
mobile=0;
if os_type=os_ios or os_type=os_android mobile=1;
last_add=0;
last_add_offer=0;
inap=0;
//когда последний сеанс
last_seance=0;

//порядок в котором открывается еда
eat_available=5;
e_t_a[1] =1;//мороженное
e_t_a[2] =2;//гамбургер
e_t_a[3] =4;//милкшейк
e_t_a[4] =5;//пицца
e_t_a[5] =6;//пончик
e_t_a[6] =3;//кекс
e_t_a[7] =0;//блинчики
e_t_a[8] =7;//картошка
e_t_a[9] =9;//яишня
e_t_a[10]=8;//тортик

// ИНАПЫ
inap_value[0]= 499;    //стартер пак. его вэлью в отдельных переменных ниже
inap_value[1]= 250;    //600;  
inap_value[2]= 600;    //1200; 
inap_value[3]= 2000;   //3000; 
inap_value[4]= 5000;   //7000; 
inap_value[5]= 12000;   //15000;
inap_value[6]= 30000;  //40000;

inap_cost[0]= 1.99;    //стартер пак
inap_cost[1]= 0.99;
inap_cost[2]= 1.99;
inap_cost[3]= 4.99;
inap_cost[4]= 8.99;
inap_cost[5]= 13.99;
inap_cost[6]= 22.99;
inap_currency_name='';
inap_currency_name_pre='USD';

inap_num     = 7;//писать тут сколько их чтоб не лазить в асинк менять
inap_index[0]= "feedthepig_starter";
inap_index[1]= "feedthepig_gems1";
inap_index[2]= "feedthepig_gems2";
inap_index[3]= "feedthepig_gems3";
inap_index[4]= "feedthepig_gems4";
inap_index[5]= "feedthepig_gems5";
inap_index[6]= "feedthepig_gems6";

levels_opened = 1;//сколько всего открыто, в начале только первый 
gift_delay = 24;//раз в сколько часов можно отправлять гифты френдам

//базовые ресурсы из шапки
gold=0;
gems=0
silver_keys=0;
gold_keys=0;

//время сундоков в часах  1 обычный 2 редкий 3 эпический
chest_timing[1]=2;
chest_timing[2]=8;
chest_timing[3]=16;
chest_type[1]=1;
chest_type[2]=1;
chest_type[3]=1;
chest_type[4]=1;
chest_type[5]=1;
chest_type[6]=1;
chest_type[7]=1;
chest_type[8]=1;
chest_type[9]=1;
//коэффициент двойного дропа  
chest_chance_double[1]=0;
chest_chance_double[2]=2;
chest_chance_double[3]=4;
//сколько осталось открываться
chest_time[1]=0;
chest_time[2]=0;
chest_time[3]=0;
chest_time[4]=0;
chest_time[5]=0;
chest_time[6]=0;
chest_time[7]=0;
chest_time[8]=0;
chest_time[9]=0;
//шанс и количество дропа в сундуке
var chch=0;           chest_chance[0]   = 39;        //gold 
chch=chest_chance[0]; chest_chance[1]   = 13+chch;   //one_gem
chch=chest_chance[1]; chest_chance[2]   = 8.5+chch;  //many_gems
chch=chest_chance[2]; chest_chance[3]   = 17+chch;   //powerup
chch=chest_chance[3]; chest_chance[4]   = 8+chch;    //golden_key 
chch=chest_chance[4]; chest_chance[5]   = 14.5+chch; //silver_key

chest_basicdrop[0] = 70; //gold 
chest_basicdrop[1] = 3;  //one_gem
chest_basicdrop[2] = 5; //many_gems
chest_basicdrop[3] = 2;  //powerup
chest_basicdrop[4] = 1;  //golden_key
chest_basicdrop[5] = 2;  //silver_key

//базовое количество дропа в спинере
spinner_basicdrop[0] = 10; //gold 
spinner_basicdrop[1] = 1;  //one_gem
spinner_basicdrop[2] = 3;  //many_gems
spinner_basicdrop[3] = 1;  //powerup
spinner_basicdrop[4] = 1;  //golden_key
spinner_basicdrop[5] = 2;  //silver_key

//стартер пак
starter_pack[0]=0;    //уже активирован - 0 если еще не был куплен
starter_pack[1]=600;  //камни
starter_pack[2]=30;   //ключи
starter_pack[3]=9999; //золото 
starter_pack[4]=60;   //сколько часов длится (24*2.5)
starter_pack[5]=date_current_datetime();    //когда начался

//гемов за рекламу в магазине
last_gems_for_add[0]=0;//последний раз посмотрено
last_gems_for_add[1]=0;//сегодня уже посмотрено

promo[0]=0;//15122 - 100 камней
next_push=0;
/////////////
/////////////    ЗВУК
/////////////

sound=1;
music=1;

pig_snd=0; //эта переменная будет принимать вид
//всех звуков, которые свинья говорит в геймплее,
//чтобы она не перебивала сама себя

main_sync_group=0;
main_sync_group = audio_create_sync_group(true);
msc[0]=0;
msc[1]=0;
msc[2]=0;//2 и 3 это геин первых двух
msc[3]=0;

music_track[0,0]=snd_music_1;
music_track[0,1]=snd_music_1_supressed;
music_track[1,0]=snd_music_2;
music_track[1,1]=snd_music_2_supressed;
music_track[2,0]=snd_music_3;
music_track[2,1]=snd_music_3_supressed;

snd_item_coin  = snd_coin;
snd_item_gem   = snd_gem;
snd_item_key   = snd_key;
snd_item_power = snd_pop;


/////////////
/////////////    ЗАКЛАДКИ
/////////////

tile_depth_levels = 0;
chest_focused=0;
chest_focused_tier=0;
must_deactivate=ds_list_create();
test_deact=0;
daily_day=-1;
daily_start_count=0;
daily_gift[1]=3;
daily_gift[2]=5;
daily_gift[3]=10;
daily_gift[4]=20;
daily_gift[5]=50;
next_time_bonus = 0;

//загружаемое на счет квестов.
//0 - всегда дейлик. если он выполнен - писать мол ждите следующий 
quest_type[0]=-1;//тип квеста-что собрать
quest_type[1]=-1;
quest_type[2]=-1;
quest_progress[0]=0;//сколько осбрал
quest_progress[1]=0;
quest_progress[2]=0;
quest_target[0]=0;//сколько надо собрать (сохранить, т.к. ранд число)
quest_target[1]=0;
quest_target[2]=0;
quest_daily_start=0;//когда начался последний дейлик (сохранять ли это вобще?) 
//это на счет квестов но не сохраняется
quest_name[0]='000';
quest_name[1]='000';
quest_name[2]='000';
quest_description[0]='000';
quest_description[1]='000';
quest_description[2]='000';
quest_reward[0]='000';
quest_reward[1]='000';
quest_reward[2]='000';
/////////////
/////////////    ГЕЙМПЛЕЙ
/////////////
global.item_num[0]=0;
global.item_num[1]=0;
global.item_num[2]=0;
global.item_num[3]=0;
global.item_num[4]=0;
global.item_num[5]=0;
global.item_num[6]=0;
global.item_num[7]=0;
global.item_num[8]=0;
global.item_num[9]=0;

powerup_num[1] = 3;/*гриб*/ 
powerup_num[2] = 3;/*крест*/ 
powerup_num[3] = 3;/*мухи*/ 
powerup_num[4] = 3;/*часы*/ 
powerup_num[5] = 3;/*мороз*/
powerup_level[1] = 0;
powerup_level[2] = 0;
powerup_level[3] = 0;
powerup_level[4] = 0;
powerup_level[5] = 0;
freeze_moves=0;
spinner_freespin=1;
spinner_gemspin=5;

itemshift[0] = -3;
itemshift[1] = -3;
itemshift[2] = -15;
itemshift[3] = -3;
itemshift[4] = 0;
itemshift[5] = -30;
itemshift[6] = -7;
itemshift[7] = +3;
itemshift[8] = -4;
itemshift[9] = -5;

dark_items = 0;

//надо запомнить для сюрфейса луза
lose_item[0,0]=0;
lose_item[0,1]=0;
lose_item[1,0]=0;
lose_item[1,1]=0;
lose_item[2,0]=0;
lose_item[2,1]=0;
lose_size=0;

/////////////
/////////////    АПГРЕЙДЫ
/////////////

instance_create(0,0,mtf); //МТФ создается тут

//level[0] max[1] start[2] last[3]

upgrade[1,0]/*будильник*/  = 0;   upgrade[1,1]= 50;    upgrade[1,2]= 100;   upgrade[1,3]= 5000;          
upgrade[2,0]/*сытый*/      = 0;   upgrade[2,1]= 50;    upgrade[2,2]= 100;   upgrade[2,3]= 5000;                    
upgrade[3,0]/*фриспин*/    = 0;   upgrade[3,1]= 2;     upgrade[3,2]= 300;   upgrade[3,3]= 0;          
upgrade[4,0]/*спинзолото*/ = 0;   upgrade[4,1]= 40;    upgrade[4,2]= 40;    upgrade[4,3]= 2400;          
upgrade[5,0]/*спинпавер*/  = 0;   upgrade[5,1]= 5;     upgrade[5,2]= 100;   upgrade[5,3]= 10000;          
upgrade[6,0]/*время сунд*/ = 0;   upgrade[6,1]= 50;    upgrade[6,2]= 100;   upgrade[6,3]= 5000;          
upgrade[7,0]/*золото сунд*/= 0;   upgrade[7,1]= 100;   upgrade[7,2]= 50;    upgrade[7,3]= 3000;          
upgrade[8,0]/*стоим улучш*/= 0;   upgrade[8,1]= 100;   upgrade[8,2]= 40;    upgrade[8,3]= 4000;          
upgrade[9,0]/*время улучш*/= 0;   upgrade[9,1]= 50;    upgrade[9,2]= 100;   upgrade[9,3]= 5000;          
upgrade[10,0]/*гриб*/       = 0;  upgrade[10,1]= 10;   upgrade[10,2]= 200;  upgrade[10,3]= 5000;          
upgrade[11,0]/*крест*/      = 0;  upgrade[11,1]= 10;   upgrade[11,2]= 200;  upgrade[11,3]= 5000;          
upgrade[12,0]/*мухи*/       = 0;  upgrade[12,1]= 10;   upgrade[12,2]= 200;  upgrade[12,3]= 5000;          
upgrade[13,0]/*часы*/       = 0;  upgrade[13,1]= 10;   upgrade[13,2]= 200;  upgrade[13,3]= 5000;          
upgrade[14,0]/*мороз*/      = 0;  upgrade[14,1]= 10;   upgrade[14,2]= 200;  upgrade[14,3]= 5000;          
upgrade[15,0]/*блин*/       = 0;  upgrade[15,1]= 50;   upgrade[15,2]= 50;   upgrade[15,3]= 2500;          
upgrade[16,0]/*морога*/     = 0;  upgrade[16,1]= 50;   upgrade[16,2]= 50;   upgrade[16,3]= 2500;          
upgrade[17,0]/*гамбург*/    = 0;  upgrade[17,1]= 50;   upgrade[17,2]= 50;   upgrade[17,3]= 2500;          
upgrade[18,0]/*кекс*/       = 0;  upgrade[18,1]= 50;   upgrade[18,2]= 50;   upgrade[18,3]= 2500;          
upgrade[19,0]/*стакан*/     = 0;  upgrade[19,1]= 50;   upgrade[19,2]= 50;   upgrade[19,3]= 2500;          
upgrade[20,0]/*пицка*/      = 0;  upgrade[20,1]= 50;   upgrade[20,2]= 50;   upgrade[20,3]= 2500;          
upgrade[21,0]/*пончик*/     = 0;  upgrade[21,1]= 50;   upgrade[21,2]= 50;   upgrade[21,3]= 2500;          
upgrade[22,0]/*картофан*/   = 0;  upgrade[22,1]= 50;   upgrade[22,2]= 50;   upgrade[22,3]= 2500;          
upgrade[23,0]/*торт*/       = 0;  upgrade[23,1]= 50;   upgrade[23,2]= 50;   upgrade[23,3]= 2500;          
upgrade[24,0]/*яишня*/      = 0;  upgrade[24,1]= 50;   upgrade[24,2]= 50;   upgrade[24,3]= 2500; 

//basic_effect[4]
upgrade[1,4]= 0;
upgrade[2,4]= 0;
upgrade[3,4]= 0;
upgrade[4,4]= 1.01;
upgrade[5,4]= 1;
upgrade[6,4]= 0;
upgrade[7,4]= 1.3;
upgrade[8,4]= 0;
upgrade[9,4]= 0;
upgrade[10,4]= 0;
upgrade[11,4]= 0;
upgrade[12,4]= 0;
upgrade[13,4]= 0;
upgrade[14,4]= 0;
upgrade[15,4]= 0.018;
upgrade[16,4]= 0.018;
upgrade[17,4]= 0.018;
upgrade[18,4]= 0.018;
upgrade[19,4]= 0.018;
upgrade[20,4]= 0.018;
upgrade[21,4]= 0.018;
upgrade[22,4]= 0.018;
upgrade[23,4]= 0.018;
upgrade[24,4]= 0.018;

//title[5] тут на самом деле ssылка на язык, ну пока ладно
upgrade[1,5]             = mtf.l_upgrade[1,0]; 
upgrade[2,5]             = mtf.l_upgrade[2,0]; 
upgrade[3,5]             = mtf.l_upgrade[3,0]; 
upgrade[4,5]             = mtf.l_upgrade[4,0]; 
upgrade[5,5]             = mtf.l_upgrade[5,0]; 
upgrade[6,5]             = mtf.l_upgrade[6,0]; 
upgrade[7,5]             = mtf.l_upgrade[7,0]; 
upgrade[8,5]             = mtf.l_upgrade[8,0]; 
upgrade[9,5]             = mtf.l_upgrade[9,0]; 
upgrade[10,5]/*гриб*/    = mtf.l_upgrade[10,0];
upgrade[11,5]/*крест*/   = mtf.l_upgrade[11,0];
upgrade[12,5]/*мухи*/    = mtf.l_upgrade[12,0];
upgrade[13,5]/*часы*/    = mtf.l_upgrade[13,0];
upgrade[14,5]/*мороз*/   = mtf.l_upgrade[14,0];
upgrade[15,5]/*блин*/    = mtf.l_upgrade[15,0];
upgrade[16,5]/*морога*/  = mtf.l_upgrade[16,0];
upgrade[17,5]/*гамбург*/ = mtf.l_upgrade[17,0];
upgrade[18,5]/*кекс*/    = mtf.l_upgrade[18,0];
upgrade[19,5]/*стакан*/  = mtf.l_upgrade[19,0];
upgrade[20,5]/*пицка*/   = mtf.l_upgrade[20,0];
upgrade[21,5]/*пончик*/  = mtf.l_upgrade[21,0];
upgrade[22,5]/*картофан*/= mtf.l_upgrade[22,0];
upgrade[23,5]/*торт*/    = mtf.l_upgrade[23,0];
upgrade[24,5]/*яишня*/   = mtf.l_upgrade[24,0];

//description[6]                
upgrade[1,6]             = mtf.l_upgrade[1,1]; 
upgrade[2,6]             = mtf.l_upgrade[2,1]; 
upgrade[3,6]             = mtf.l_upgrade[3,1]; 
upgrade[4,6]             = mtf.l_upgrade[4,1]; 
upgrade[5,6]             = mtf.l_upgrade[5,1]; 
upgrade[6,6]             = mtf.l_upgrade[6,1]; 
upgrade[7,6]             = mtf.l_upgrade[7,1]; 
upgrade[8,6]             = mtf.l_upgrade[8,1]; 
upgrade[9,6]             = mtf.l_upgrade[9,1]; 
upgrade[10,6]/*гриб*/    = mtf.l_upgrade[10,1];
upgrade[11,6]/*крест*/   = mtf.l_upgrade[11,1];
upgrade[12,6]/*мухи*/    = mtf.l_upgrade[12,1];
upgrade[13,6]/*часы*/    = mtf.l_upgrade[13,1];
upgrade[14,6]/*мороз*/   = mtf.l_upgrade[14,1];
upgrade[15,6]/*блин*/    = mtf.l_upgrade[15,1];
upgrade[16,6]/*морога*/  = mtf.l_upgrade[16,1];
upgrade[17,6]/*гамбург*/ = mtf.l_upgrade[17,1];
upgrade[18,6]/*кекс*/    = mtf.l_upgrade[18,1];
upgrade[19,6]/*стакан*/  = mtf.l_upgrade[19,1];
upgrade[20,6]/*пицка*/   = mtf.l_upgrade[20,1];
upgrade[21,6]/*пончик*/  = mtf.l_upgrade[21,1];
upgrade[22,6]/*картофан*/= mtf.l_upgrade[22,1];
upgrade[23,6]/*торт*/    = mtf.l_upgrade[23,1];
upgrade[24,6]/*яишня*/   = mtf.l_upgrade[24,1];

//upgrade time ------ время апдейта и общее состояние             
upgrade[1,7]             = 0;
upgrade[2,7]             = 0;
upgrade[3,7]             = 0;
upgrade[4,7]             = 0;
upgrade[5,7]             = 0;
upgrade[6,7]             = 0;
upgrade[7,7]             = 0;
upgrade[8,7]             = 0;
upgrade[9,7]             = 0;
upgrade[10,7]/*гриб*/    = 0;
upgrade[11,7]/*крест*/   = 0;
upgrade[12,7]/*мухи*/    = 0;
upgrade[13,7]/*часы*/    = 0;
upgrade[14,7]/*мороз*/   = 0;
upgrade[15,7]/*блин*/    = 0;
upgrade[16,7]/*морога*/  = 0;
upgrade[17,7]/*гамбург*/ = 0;
upgrade[18,7]/*кекс*/    = 0;
upgrade[19,7]/*стакан*/  = 0;
upgrade[20,7]/*пицка*/   = 0;
upgrade[21,7]/*пончик*/  = 0;
upgrade[22,7]/*картофан*/= 0;
upgrade[23,7]/*торт*/    = 0;
upgrade[24,7]/*яишня*/   = 0;

//листы с прайсами и временем, который потом будут сравниваться в скрипте
upgr_list_price=ds_list_create();
ds_list_add(upgr_list_price,50,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800);
ds_list_add(upgr_list_price,850,900,950,1000,1050,1100,1150,1200,1250,1300,1350,1400,1450,1500,1550,1600);
ds_list_add(upgr_list_price,1650,1700,1750,1800,1850,1900,1950,2000,2050,2100,2150,2200,2250,2300,2350,2400);
ds_list_add(upgr_list_price,2450,2500,2550,2600,2650,2700,2750,2800,2850,2900,2950,3000,3050,3100,3150,3200);
ds_list_add(upgr_list_price,3250,3300,3350,3400,3450,3500,3550,3600,3650,3700,3750,3800,3850,3900,3950,4000);
ds_list_add(upgr_list_price,4050,4100,4150,4200,4250,4300,4350,4400,4450,4500,4550,4600,4650,4700,4750,4800);
ds_list_add(upgr_list_price,4850,4900,4950,5000);

upgr_list_time=ds_list_create();
ds_list_add(upgr_list_time,5,10,15,30,45,1.5*60,2*60,2.5*60,3*60,3.5*60,4*60,4.5*60,5*60,6*60,7*60,8*60);
ds_list_add(upgr_list_time,9*60,10*60,11*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60);
ds_list_add(upgr_list_time,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60,12*60);
ds_list_add(upgr_list_time,12*60,12*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60);
ds_list_add(upgr_list_time,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60,18*60);
ds_list_add(upgr_list_time,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60,24*60);
ds_list_add(upgr_list_time,24*60,24*60,24*60,24*60);

/////////////
/////////////    КАКИЕ ТО СОБЫТИЯ
/////////////

//активируем инапы
scr_init_anap();

//после того как назначили, грузим все
if file_exists('save.sav') scr_load();
else {
    scr_save();
}

    //пытаемся найти макс сюрфейс сайз
    var i;
    j=256;
    for (i=j;i&lt;=1024;i*=2) {
      var s=surface_create(i,1);
      if surface_exists(s) {j=i; surface_free(s);}
    }
    log('max ss='+string(j));
    custom=j;
    custom_1=0;
    custom_2=0;
    

log('fb_connected = '+string(fb_connected));

if leaderboard_logged=1 achievement_login();

//врубаем терь музон (или нет)
scr_music_start(music_track[0,0],music_track[0,1]);

//чекаем рекламу за гемы 
scr_add_for_gems_check();

powerup_level[1] = upgrade[10,0];
powerup_level[2] = upgrade[11,0];
powerup_level[3] = upgrade[12,0];
powerup_level[4] = upgrade[13,0];
powerup_level[5] = upgrade[14,0];

log('before upgrade');
for(var i=0; i&lt;24; i++) {
if upgrade[i+1,0] &gt; upgrade[i+1,1] {upgrade[i+1,0]=upgrade[i+1,1]; scr_save();}

}
log('after upgrade');
//////
///////
////////
deact=0;

var nexus_str='';
var os_map = os_get_info();
if os_map != -1
   {
   var size, key, i;
   size = ds_map_size(os_map);
   key = ds_map_find_first(os_map);
   for (i = 0; i &lt; size - 1; i++;)
      {
      //map_data[i] = ds_map_find_value(os_map, key); 
      nexus_str+=string(ds_map_find_value(os_map, key));
      key = ds_map_find_next(os_map, key);
      }
   ds_map_destroy(os_map);
   }
if string_pos('Nexus', nexus_str)!=0 or string_pos('nexus', nexus_str)!=0 or string_pos('NEXUS', nexus_str)!=0 {
nexus_device=1;
} else {
nexus_device=0;
}
//DROW   
/*for(var i=0; i&lt;array_length_1d(map_data); i++) {
draw_text(view_xview[0]+100,30+40*i,map_data[i]);
}*/
//var fire_time=date_inc_minute(date_current_datetime(),2);
//push_local_notification(fire_time,'Feed the Pig','Все улучшения и сундуки подготовлены! Назад биистра!','sassss');

if room=room_setup alarm[9]=2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_transition_to(room_bookmarks);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///пауза в геймплее

//эффект как от кнопки паузы в геймплее
if global.pause=0 scr_show_bluring_menu(0,0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///давно не виделись (?)
var open=0;
if last_seance=0 {//первый раз тут - ниче не делаем
} else {
    if date_day_span(last_seance, date_current_datetime())&gt;=3 {
        //больше 3х дней - давно не виделись
        open=1;
    } else {
        //меньше трех дней - ниче не делаем
    }   
}

//теперь в любом случае сохраняем время этого сеанса
last_seance=date_current_datetime();
scr_save();

if open {
    //попап - давно не виделись
    scr_show_bluring_menu(12,0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///облом рекламы

switch ad_place {
case 1: //фри спин
    obj_spinner_arrow.alarm[0]=1;
break;
case 2: //камни

break;
case 3: //случайный бонус

break;
case 4: //дополнительное время на уровне
    //scr_close_blurring(Main.time_start*0.3,0);
break;
}

ad_place=0;
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///посмотрелась реклама

log('start after interstitial alarm')

switch ad_place {
case 1: //фри спин
    log('log before spin');
    scr_spin();
    log('log after spin');
break;
case 2: //камни
    
    var add=0;
    if last_gems_for_add[1]=0 {//если еще не просмотрено седня
        last_gems_for_add[0]=date_current_datetime();//последний раз посмотрено
        last_gems_for_add[1]=1;//сегодня уже посмотрено
        add=5;
        scr_save();
        with obj_button {
            if index=45 alarm[0]=1;
        }
    } else add=2;
    
    //спауним штучечгу
    var drop=instance_create(room_width/2,room_height/2,obj_spinner_drop);   
    drop.num     = add;
    drop.type    = 3;
    drop.index   = 6;
    drop.size    = 1;
    drop.reward  = 1;
    drop.font=font_42;
    drop.alarm[2]= room_speed*1;

    log('gems for ad added');

break;
case 3: //случайный бонус
    for(var i=0;i&lt;3;i++) {
        var drop=instance_create(room_width/2-265+265*i,room_height/2,obj_spinner_drop);   
        drop.num   = obj_pause_menu.random_info[i+3];
        var tp     = obj_pause_menu.random_info[i];
             if tp=1 tp=3;
        else if tp=2 tp=1;
        else if tp=3 tp=2;
        drop.type  = tp;
        drop.index = 6;
        drop.size=1;
        drop.reward=2;
        drop.font=font_42;
        drop.alarm[2]=room_speed*1;    
    }

break;
case 4: //дополнительное время на уровне
    scr_close_blurring(time_start*0.3,0);
    log('time after lose - '+string(time_start*0.3*room_speed));
break;
}


last_add=date_current_datetime();
scr_save();
ad_place=0;
    

/*if (GoogleMobileAds_InterstitialStatus()=="Ready"){
    GoogleMobileAds_ShowInterstitial(); 
} else {
    alarm[5]=room_speed*5;
}*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///все еще чекаем гифты
scr_reciece_gifts(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///чекнем гифты френдов

if facebook_status()="AUTHORISED" {
    log('fb connected');
    if fb_gifts_checked=0 {
        gifts_check=0;
        scr_fb_check_gifts(1);
    }
} else if facebook_status()="FAILED" {
    fb_connected=0;
    scr_save();
} else {
    alarm[2]=room_speed;
}

log(facebook_status());
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///after pause

for(var i=0; i&lt;ds_list_size(surface_list); i++) {
    surface_free(ds_list_find_value(surface_list,i));
}


for(var i=0; i&lt;ds_list_size(surface_list); i++) {
    ds_list_delete(surface_list,i);
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Daily bonus
   
if daily_start_count=0 or is_undefined(daily_start_count) {
    //вообще первый раз тут. сохраняем старт коунт и начинаем отсчет с этого дня
    daily_start_count=date_current_datetime();
    daily_day=0;
    scr_save();
} else {
    //сколько дней прошло с сохраненного старт каунта  
    var day_from_begin=floor(date_get_day_of_year(date_current_datetime())-date_get_day_of_year(daily_start_count));

    if day_from_begin=0 {//тот же день - ниче не делаем
    
    } else if day_from_begin=daily_day+1 {//следующий день - даем награду
        daily_day+=1;
        if daily_day&gt;5 daily_day=1;
        scr_save();
        scr_show_bluring_menu(11,0);
    } else if day_from_begin&gt;daily_day+1 {//пропущен день(дни) - начинаем заново?
        daily_start_count=date_current_datetime();
        daily_day=1;
        scr_save();
        scr_show_bluring_menu(11,0);
    }

}

alarm[7]=room_speed/2;


///чекнем фб коннект в целом 
if os_is_network_connected() = 0 { //вообще нет сети
} else {
    if fb_connected=1 {//если до этого коннектились норм
      scr_facebook_connect();
      alarm[2]=room_speed*2;
    }
} 


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="5" enumb="40">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.bookmark_current.y+=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="54">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if instance_exists(obj_blur) {
    var drop=instance_create(mouse_x,mouse_y,obj_spinner_drop);   
    drop.num = scr_count_spinner_gold();
    drop.type = 0;
    drop.index = 6;
    drop.size=1;
    drop.reward=1;
    drop.alarm[2]=room_speed*2;
}*/

//scr_spawn_reward(mouse_x,mouse_y)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="70">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// AdColony реклама

//вытаскиваем валюту
if ds_map_exists(async_load, "BILLING_ITEM_DETAILS") //This is the data we get from the extension.
    {
     var details_billing = ds_map_find_value(async_load, "BILLING_ITEM_DETAILS"); //We receive the details of the first item (just enough)
     if !is_undefined(details_billing) and is_string(details_billing) and string_length(details_billing)&gt;10 //Checking...
        {
         var map_item0 = json_decode(details_billing); //and turn them into a map.
         if ds_exists(map_item0, ds_type_map)
           {
            if !ds_map_empty(map_item0)
             {
                var currency_billing = map_item0[? "price_currency_code"]; //This key holds the ISO 4217 currency code.
                if !is_undefined(currency_billing) and is_string(currency_billing)
                   {
                    var store_currency = currency_billing; //The value can be stored to send it to our analytics provider.
                   } else currency_billing = '';
                scr_inap_get_currency(currency_billing);//делаем вещи с именем вали
             }
            ds_map_destroy(map_item0);
           }
        }
    }
    
    

log("async_load = "+string(json_encode(async_load)));

var ident = ds_map_find_value(async_load, "id" );
//log(string('identttt = ')+string(ident));

if ident = 101 {
    alarm[5]=2;
    trys2 = 0;
    log('alarm is set 101')
} else if ident = 102 {//ad shown
    alarm[5]=2;
    log('alarm is set 102')
    trys2 = 0;
} else if ident = 103 {//ad not shown
    log('alarm is set 103')
    if trys2 = 0 {trys2 = 1; AdColony_ShowVideo(ZoneId2);}//если не показалась первая зона, пробуем показывать вторую, потом третью
    else {
        trys2 = 0;
        if GoogleMobileAds_InterstitialStatus()=="Ready" {GoogleMobileAds_ShowInterstitial(); alarm[5]=room_speed*5;}
        else alarm[6]=1;//если ни одной, пробуем гугл интерстишалы
    } 

}
log('alarm is set 104')




/*var type = ds_map_find_value(async_load, "type");
log(string('type = ')+string(type));
if (type == "adcolony_reward")  {
    var name = ds_map_find_value(async_load, "currname");
    var amount = ds_map_find_value(async_load, "curramount");
    //switch(name) {
    //    case "Coins": global.cash += amount; break;
    //}
    log(string(name)+string(amount));
    
    //scr_spin();
}*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="66">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///получена инфа о покупках


var val = ds_map_find_value(iap_data, "type");
switch (val) {
   case iap_ev_product: //узнаем стоимость покупок
    var map2=ds_map_create();
    iap_product_details(iap_data[? "index"], map2);
    var idd=map2[? "id"];
    for(var i=0;i&lt;inap_num/*array_length_1d(inap_index)*/;i++) {
        if idd=inap_index[i] {
            inap_cost[i]=string(map2[? "price"]);
            log('inap cost added - '+string(map2[? "price"])+string('end'));
        }
    }
    ds_map_destroy(map2);
   break;

   case iap_ev_purchase: //была нажата кнопка покупки
   log('iap_ev_purchase');
   var map = ds_map_create();
   var purchase_id = ds_map_find_value(iap_data, "index");
   iap_purchase_details(purchase_id, map);
   if ds_map_find_value(map, "status") == iap_purchased {//всё окей, игрок удачно совершил покупку!
         var product_id = ds_map_find_value(map, "product");
         log('iap_purchased');
         ds_map_replace(global.purchaseMap, product_id, 1); // отключение нонконсюмоблов
            
            if product_id= Main.inap_index[0] and Main.starter_pack[0]=0 {//это не консюмабл, стартер пак
                log('starter was bought');
                //сохраняем в его случае что покупка была
                if file_exists("iap_data.json") file_delete("iap_data.json");//уберем все из файла
                ds_map_secure_save(global.purchaseMap, "iap_data.json");     //и перезапишем его
                //даем ништяки за него
                Main.gems+=      Main.starter_pack[1]; //камни
                Main.gold_keys+= Main.starter_pack[2]; //ключи
                Main.gold+=      Main.starter_pack[3]; //золото 
                Main.starter_pack[0]=1;                //активен
                scr_save();
                //todo сохранять это все правильно и загружать
                
                //аналитика - купил время за рекламу
                GoogleAnalytics_SendEventExt('INAP','Buy non-consume',product_id,1);
                //попап
                scr_show_bluring_menu(20,0);
            } 
            else if product_id= Main.inap_index[1] iap_consume(product_id);//а этот код пошлёт нас чуть ниже!
            else if product_id= Main.inap_index[2] iap_consume(product_id);
            else if product_id= Main.inap_index[3] iap_consume(product_id);
            else if product_id= Main.inap_index[4] iap_consume(product_id);
            else if product_id= Main.inap_index[5] iap_consume(product_id);
            else if product_id= Main.inap_index[6] iap_consume(product_id);
                
            //в кейсе консюмабла
            //Тут должен быть ваш код отключения рекламы. Например, noads=0, а при показе рекламы проверять, чему равен noads. Не забудьте сохранить новое значение в .ини, к примеру.
            //if global.iaprestoreall=-1 show_message_async('Thanks for disabling ADS!'); //а это наша благодарность за отключение рекламы.
               
   }
   ds_map_destroy(map);
   //о смысле трёх следующих строк ты узнаешь в самом низу кода
   //if global.iaprestoreall=0 show_message_async('Store is not available.');
   //if global.iaprestoreall=1 show_message_async('RESTORED!');
   //global.iaprestoreall=-1;
   break;

    case iap_ev_consume: //консюмим многоразовые
        var product_id = ds_map_find_value(iap_data, "product");
        log('iap_ev_consume '+string(product_id));
        
        if ds_map_find_value(iap_data, "consumed") {
            ds_map_replace(global.purchaseMap, product_id, 0); //обнуляем значение покупки
            
                 if product_id= Main.inap_index[1] Main.gems += Main.inap_value[1];
            else if product_id= Main.inap_index[2] Main.gems += Main.inap_value[2];
            else if product_id= Main.inap_index[3] Main.gems += Main.inap_value[3];
            else if product_id= Main.inap_index[4] Main.gems += Main.inap_value[4];
            else if product_id= Main.inap_index[5] Main.gems += Main.inap_value[5];
            else if product_id= Main.inap_index[6] Main.gems += Main.inap_value[6];
            inap+=1;
            //если сделать покупку нужно для квеста
            for(var i=0;i&lt;3;i++) {
                if Main.quest_type[i]=15 {
                    //+1 и сохранить
                    Main.quest_progress[i]+=1;

                }   
            }
            scr_save();
            //аналитика - купил время за рекламу
            GoogleAnalytics_SendEventExt('INAP','Buy consume',product_id,1);
            //пAпАбЧеГ
            scr_show_bluring_menu(20,0);
        }
    break;

    case iap_ev_restore: //этот код вызывается при нажатии на кнопку восстановления покупки. Он нам задает значение 0 или 1 (не восстановилось, восстановилось).
      log('iap_ev_restore');
      var map = ds_map_create();
      var res = ds_map_find_value(iap_data, "result"); //это и есть то самое значение
      if res == 1 global.iaprestoreall=1 else global.iaprestoreall=0; //а эта строка нужна для того, чтоб выводить корректные сообщения при покупке и восстановлении. Пустячок, а приятно.
      ds_map_destroy(map);
    break
    
   }
ds_map_secure_save(global.purchaseMap, "iap_data.json");

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>ds_list_destroy(upgr_list_price);
ds_list_destroy(upgr_list_time);
ds_list_destroy(must_deactivate);


audio_destroy_sync_group(Main.main_sync_group);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if os_is_paused()=1 alarm[1]=1;

/*visible=1;
draw_set_font(font_30);
draw_set_color(c_red);
draw_set_valign(fa_center);
draw_set_halign(fa_left);
//draw_text(view_xview[0]+100,30,string(fps)+string(' / ')+string(fps_real) + ' / '+ string(custom));
draw_text(view_xview[0]+100,70,string(custom)+' // '+string(custom_1)+' // '+string(custom_2));
*/



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="106">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>   scr_transition_to(0);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="87">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

//with obj_button visible=!visible;


/*if deact=0 {

    for(i=0;i&lt;ds_list_size(must_deactivate);i++) {
        instance_deactivate_object(ds_list_find_value(Main.must_deactivate,i));
    }

} else {

    for(i=0;i&lt;ds_list_size(must_deactivate);i++) {
        instance_activate_object(ds_list_find_value(Main.must_deactivate,i));
    }

}*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="82">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

///LOAD

//scr_load();*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="81">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///add resources




gold+=1000;
gems+=50
silver_keys+=10;
gold_keys+=10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="69">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///пытаемся добавить строку

for(var i=0;i&lt;ds_list_size(Main.surface_list);i++) {
    surface_free(ds_list_find_value(Main.surface_list,i));
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///кнопка назад

if room=room_gameplay { //геймплей - пауза
    //эффект как от кнопки паузы в геймплее
    if global.pause=0 scr_show_bluring_menu(0,0);
} else if room=room_bookmarks { //закладки
    //если существуют кнопки 4 (закрыть поп) или 20(листнуть назад из внутренней закладки),
    //нажать их
    with obj_button {
        if index=4 or index=20 {
            //имитируем будто нажимаем их.
            //по идее нужно только их действие, так что 
            //ничего дурного не будет. да? да?
            alarm[1]=1;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
