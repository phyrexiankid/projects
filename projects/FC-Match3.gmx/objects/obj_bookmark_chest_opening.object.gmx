<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_chest</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-201</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>opening=0;
//0-закрыт
//1-открывается
//2-открыт
mult=0.75*global.spd;
image_xscale=0.75*mult
image_yscale=0.75*mult
image_speed=0;
image_index=0;

tier=0;
falling=0;
turn=1;
move=1;
sped=1;
size_mod = 0;
alpha = 1;
fade=0;
num=1;
angle=1;
loot_type[1]=1;
loot_type[2]=2;
loot_type[3]=3;
loot_type[4]=4;
loot_type[5]=5;
drop_number[1]=1;
drop_number[2]=1;
drop_number[3]=1;
drop_number[4]=1;
drop_number[5]=1;

timeline_index = tml_menu_bounce;
timeline_position = 0;
timeline_running = true;
timeline_loop = 0;
timeline_speed = 0.375*global.spd;

//добавим этот объект в лист кнопок меню размытия, чтоб он мог это все разломать 
ds_list_add(obj_pause_menu.button_list,id);

alarm[11]=1;




</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///change sprite index

     if tier = 1 sprite_index = sp_chest;
else if tier = 2 sprite_index = sp_chest_gold;
else if tier = 3 sprite_index = sp_chest_epic;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///last one on the target, close blurring

fade=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///close everything

scr_close_blurring(0,101);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn loot 5

scr_spawn_loot(5);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn loot 4

scr_spawn_loot(4);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn loot 3

scr_spawn_loot(3);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn loot 2

scr_spawn_loot(2);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///spawn loot 1

scr_spawn_loot(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///open and spawn X objects
if opening=0 {
    opening=1;
    
    
    
    //количество предметов
    randomize();
    if Main.chest_focused_tier=1 num=choose(1,1,1,1,2);
    else if Main.chest_focused_tier=2 num=choose(1,1,2,2,3,3,3,4,5);
    else if Main.chest_focused_tier=3 num=choose(2,2,3,3,3,4,4,4,4,5,5,5,5);
    var chns_list = ds_list_create();
    for(var u=1;u&lt;100+1;u++) {
        ds_list_add(chns_list,u);
    }
    ds_list_shuffle(chns_list);
    
    angle=round(random_range(1,360));
    var double = round(random_range(0,Main.chest_chance_double[Main.chest_focused_tier]));

    for(var i=0;i&lt;num;i++) {
        var looot=ds_list_find_value(chns_list,i);
        //тип предмета
             if looot &lt;= Main.chest_chance[0]                              {looot=0; loot_type[i+1] = 0;}
        else if looot&gt;Main.chest_chance[0] and looot&lt;=Main.chest_chance[1] {looot=1; loot_type[i+1] = 3;}
        else if looot&gt;Main.chest_chance[1] and looot&lt;=Main.chest_chance[2] {looot=2; loot_type[i+1] = 3;}
        else if looot&gt;Main.chest_chance[2] and looot&lt;=Main.chest_chance[3] {looot=3; loot_type[i+1] = choose(4,5,6,7,8);}
        else if looot&gt;Main.chest_chance[3] and looot&lt;=Main.chest_chance[4] {looot=4; loot_type[i+1] = 2;}
        else if looot&gt;Main.chest_chance[4]                                 {looot=5; loot_type[i+1] = 1;}
        //некоторые х2
        if looot=0 drop_number[i+1]=scr_count_chest_gold()*(1+(i&lt;double));//золото сундука по своей формуле
        else drop_number[i+1]=Main.chest_basicdrop[looot]*(1+(i&lt;double));

        alarm[i+1]=room_speed/3+num/2+i*(room_speed/4);
    }
    ds_list_destroy(chns_list);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch opening {
case 0://0-закрыт
image_xscale += size_mod*mult;
image_yscale += size_mod*mult;
draw_sprite_ext(sprite_index,0,x,y,image_xscale,image_yscale,0,noone,alpha);
break;
case 1://1-открывается
image_index+=0.25*global.spd;
if image_index &gt;= 5 {//открылся, вылетает лут с него
    opening=2;
}
draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,0,noone,alpha);
break;
case 2://2-открыт
if fade=1 {
alpha-=0.0375*global.spd;
if alpha&lt;=0 {
    fade=0;
    alarm[6]=1;
}
}
draw_sprite_ext(sprite_index,5,x,y,image_xscale,image_yscale,image_angle,noone,alpha);
break;
}

draw_set_valign(fa_middle);
draw_set_halign(fa_center);
draw_set_color(c_white);
draw_set_font(font_27);
draw_sprite(sp_powerups,0,523+203*0,1917);
draw_sprite(sp_powerups,1,523+203*1,1917);
draw_sprite(sp_powerups,2,523+203*2,1917);
draw_sprite(sp_powerups,3,523+203*3,1917);
draw_sprite(sp_powerups,4,523+203*4,1917);
draw_text(523+203*0,2005,Main.powerup_num[1]);
draw_text(523+203*1,2005,Main.powerup_num[2]);
draw_text(523+203*2,2005,Main.powerup_num[3]);
draw_text(523+203*3,2005,Main.powerup_num[4]);
draw_text(523+203*4,2005,Main.powerup_num[5]);

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
