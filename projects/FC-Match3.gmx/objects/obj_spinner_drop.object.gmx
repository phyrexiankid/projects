<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_icons</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-203</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>num=1;//количество

sprite=0;
image=0;
dest_x=0;   
dest_y=0;
alarm[1]=1;
reward = 0;
drop_sound=snd_coin;

font=font_30;
size=0.6;
size_mod = 0;
timeline_index = tml_chestlight;
timeline_position = 0;
timeline_running = true;
timeline_loop = 0;
timeline_speed = 0.375*global.spd;

phase=1;
shift_time=15*(2/global.spd);
zigz = choose(1,2,3,4);
t = -sqrt(shift_time);
move_side = choose(-1,1);
direction = 0;
speed=0;
stop=1;

type=0;
index = 0;
start_x = x;
start_y = y;
visible=0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///reset item
with obj_button {
    if index=21 alarm[0]=1;
}

drop=instance_create(start_x, start_y, obj_spinner_drop);

switch index {
case 1: //гриб
drop.num = Main.spinner_basicdrop[3]+Main.upgrade[5,4]*Main.upgrade[5,0];
drop.type = choose(4,5,6,7,8);
break;

case 2: //мало камней
drop.num = Main.spinner_basicdrop[1];
drop.type = 3;
break;

case 3: //серебрянный ключ
drop.num = Main.spinner_basicdrop[5];
drop.type = 1;
break;

case 4: //золотой ключ
drop.num = Main.spinner_basicdrop[4];
drop.type = 2;
break;

case 5: //много камней 
drop.num = Main.spinner_basicdrop[2]+(obj_spinner.spin);
drop.type = 3;
break;

case 6: //золото
drop.num = scr_count_spinner_gold();
drop.type = 0;
break;
}
drop.index=index;
with obj_spinner_drop {//дать+100 даже если ресетнулось не золото
if index=6 num = (obj_spinner.spin+1)*scr_count_spinner_gold();
if index=5 num = Main.spinner_basicdrop[2]+(obj_spinner.spin);
}


if drop.num=1 drop.size=0.7;

instance_destroy();
ds_list_delete(obj_pause_menu.button_list,ds_list_find_index(obj_pause_menu.button_list,id));
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///stop flying

if phase=1 {
phase=2;
move_side*=-1;
alarm[3]=shift_time;
} else { //финальная дестинация
stop=1;
speed=0;
visible=0;
if reward=0 {//это нормальный предмет из спиннера
    alarm[4]=1;
} else if reward=1 {//одинарный предмет - типа награда после миссии
    instance_destroy();
} else if reward=2 {//случайная награда из трех
    instance_destroy();
    scr_close_blurring(0,0);
}
//отсыпать что прилетело
switch type {
case 0: //золото
Main.gold+=num;
break;
case 1: //серебрянные ключи
Main.silver_keys+=num;
break;
case 2: //золотые ключи
Main.gold_keys+=num;
break;
case 3: //камни
Main.gems+=num;
break;
case 4: //павер - грибы
Main.powerup_num[1]+=num;
break;
case 5: //павер - кресты
Main.powerup_num[2]+=num;
break;
case 6: //павер - мухи
Main.powerup_num[3]+=num;
break;
case 7: //павер - замедление
Main.powerup_num[4]+=num;
break;
case 8: //павер - заморозка
Main.powerup_num[5]+=num;
break;
}
//сохранить это
scr_save();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///fly to destination

var ptch=random_range(0.9,1.1);
var gain=random_range(0.8,1);
scr_sound(drop_sound,1,0,ptch,gain);        

direction=point_direction(x,y,dest_x-86,dest_y);
shift_time=choose(6,7,8)*(2/global.spd);
speed=round(point_distance(x,y,dest_x-86,dest_y)/(shift_time*2));
zigz = choose(1,2,3,4);
alarm[3]=shift_time+1;
t = -sqrt(shift_time);
move_side = choose(-1,1);
stop=0;
phase=1;

//alarm[4]=room_speed/2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///switch type

if reward=0 ds_list_add(obj_pause_menu.button_list,id);

switch type {
case 0: //золото
sprite=sp_hud_icon;  image=1; dest_x=677;   dest_y=92;     drop_sound=Main.snd_item_coin;
break;
case 1: //серебрянные ключи
sprite=sp_hud_icon;  image=2; dest_x=940;   dest_y=95;     drop_sound=Main.snd_item_key;
break;
case 2: //золотые ключи
sprite=sp_hud_icon;  image=3; dest_x=1170;  dest_y=95;     drop_sound=Main.snd_item_key;
break;
case 3: //камни
sprite=sp_hud_icon;  image=4; dest_x=1430;  dest_y=95;     drop_sound=Main.snd_item_gem;
break;
case 4: //павер - грибы
sprite=sp_powerups;  image=0; dest_x=622;   dest_y=1906;   drop_sound=Main.snd_item_power;
break;
case 5: //павер - кресты
sprite=sp_powerups;  image=1; dest_x=825;   dest_y=1906;   drop_sound=Main.snd_item_power;
break;
case 6: //павер - мухи
sprite=sp_powerups;  image=2; dest_x=1027;  dest_y=1906;   drop_sound=Main.snd_item_power;
break;
case 7: //павер - замедление
sprite=sp_powerups;  image=3; dest_x=1225;  dest_y=1906;   drop_sound=Main.snd_item_power;
break;
case 8: //павер - заморозка
sprite=sp_powerups;  image=4; dest_x=1430;  dest_y=1906;   drop_sound=Main.snd_item_power;
break;
}
visible=1;
start_x = x;
start_y = y;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_xscale += size_mod/(2*global.spd);
image_yscale += size_mod/(2*global.spd);
y-=1*reward; 

if stop=0 {
    t = sqrt(abs(alarm[3]-shift_time));
    shift = (move_side*(-power(t,2) + shift_time/2))*2;
 
    x+=lengthdir_x(shift*zigz,direction-45);
    y+=lengthdir_y(shift*zigz,direction-45);
}

if num=1 {
    draw_sprite_ext(sprite,image,x,y,image_xscale*size,image_yscale*size,0,noone,1);
} else {
    draw_sprite_ext(sprite,image,x,y-25,image_xscale*size,image_yscale*size,0,noone,1);
    draw_set_font(font);
    draw_set_valign(fa_middle);
    draw_set_halign(fa_center);
    scr_draw_text_shadow(x,y+45,num,2,c_white,c_black);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
