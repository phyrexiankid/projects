<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_main_button_mask</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-6</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_set_font(obj_controller.main_font);
var sss = (/*view_wview[0]*/1150-text_in_button_widtn(obj_controller.l_n_shop)-text_in_button_widtn(obj_controller.l_n_upgrades)-text_in_button_widtn(obj_controller.l_n_stats))/4;
var ratio = (view_wview[0]-1150)/2;
line=obj_controller.l_n_shop;
screen=2;
surf_x=512;
surf_y=256;
td = string_width(line);                         

x = view_xview[0]+ratio+sss+(text_in_button_widtn(obj_controller.l_n_shop)/2);
y = ((view_hview[0]/24)*23)-obj_controller.up_mode2*0.97;
ec = x+td/2-15;    

button_surf=surface_create(surf_x,surf_y);
scr_surf_button(line,global.screen=screen);

mouse_x_press = 0;
mouse_y_press = 0;

counting = 0;
enabled_count = 0;
moving = 0;

light_alpha = 0.4;
light_changing = 0.001;
alarm[0]=room_speed*2;

slider_pos1 = obj_shop.y;

alarm[1]=room_speed*3;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>

s_counting = 0;
u_counting = 0;

//проходимся по списку табов магазина
//и сравниваем че уже можно купить
for(var i=0;i&lt;50;i++) {
  if global.ore_count &gt;= ds_list_find_value(obj_shop.cost_list_shop,i) s_counting++;
}

//так же по мапе апгрейдов

var key = ds_map_find_first(obj_shop.cost_map_upgr);
var sz =  ds_map_size(obj_shop.cost_map_upgr);
for (var i=0; i&lt;sz; i++;) {
  if global.ore_count &gt;= ds_map_find_value(obj_shop.cost_map_upgr,key) u_counting++;
  key = ds_map_find_next(obj_shop.cost_map_upgr, key);
}

enabled_count=s_counting;
obj_button_upgrades.enabled_count=u_counting;

alarm[1]=room_speed*3;



/*counting = 0;

with obj_shop_tab{
if obj_controller.ore &gt;= ore_type and global.ore_count &gt;= totalcost other.counting += 1;
}

enabled_count=counting;
if global.screen = 1 global.shop_items_number = 50;*/


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///light changing
randomize();
     if light_alpha &gt;= 1 light_changing=random_range(-0.005,-0.0001)*2
else if light_alpha &lt;= 0.4 light_changing=random_range(0.0001,0.005)*2
else light_changing = random_range(-0.005,0.005)*2;

alarm[0]=random_range(10,room_speed);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///button effect

if !global.popup_open {
if mouse_x_press = mouse_x and mouse_y_press = mouse_y {

    alarm[0]=5;

    //где мы были в последний раз
    obj_shop.shop_pos[global.screen]=obj_shop.y;

    if global.screen = 0
    {
    //obj_shop.y = obj_button_shop.slider_pos1;
    obj_controller.to_shop = 1;
    //obj_controller.closing_pers=0; 
    //obj_controller.closing_on = 0;
    obj_controller.backx =1; 
    obj_controller.up_mode3=0;
    obj_controller.alarm[0]=obj_controller.mnmult-1;
    global.screen=1;
    obj_shop.shop_pos[1]+=obj_controller.mn*11;
    moving = 1;
    }
    else if global.screen = 1
    {
    obj_button_shop.slider_pos1 = obj_shop.y;
    obj_controller.to_main = 1;
    obj_controller.alarm[1]=obj_controller.mnmult-1;
    
    moving=1;
    }
    else if global.screen = 2
    {
        obj_button_upgrades.slider_pos2 = obj_shop.y;
        global.screen=1;
        //obj_shop.y = obj_button_shop.slider_pos1;
    }
    else if global.screen = 3
    {
        obj_button_stats.slider_pos3 = obj_shop.y;
        global.screen=1;
        //obj_shop.y = obj_button_shop.slider_pos1;
        
    }
    
    global.shop_items_number = 50; // длинна прокрутки в магазине
    
    if global.sound = 1{
        var snd = snd_8bit_button;
        audio_play_sound(snd, 1, 0);
        audio_sound_pitch(snd, random_range(0.9,1.1));
    }
    
    scr_turn_child_list(1) 
    scr_surf_button(line,!obj_controller.to_main);
    with obj_button_upgrades scr_surf_button(line,0);
    with obj_button_stats scr_surf_button(line,0);
    obj_shop_tab.alarm[4]=1;

}
}

mouse_x_press = 0;
mouse_y_press = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>mouse_x_press = mouse_x;
mouse_y_press = mouse_y;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if surface_exists(button_surf) draw_surface(button_surf,x-surf_x/2,y-surf_y/2);
else scr_surf_button(line,global.screen=screen);

if enabled_count &gt; 0
{
draw_sprite(sp_enabled_count,1,x+td/2-15,y-67);
draw_set_color(c_black);
draw_set_valign(fa_middle);
draw_set_halign(fa_center);
draw_set_font(font7);
draw_text(ec,y-67,enabled_count);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
