<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_main_plash2</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-4</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>name_font = obj_controller.main_font4;

num=1;
xmi=sprite_get_width(sp_main_plash)/2;
ymi=sprite_get_height(sp_main_plash)/2;
sph = sprite_get_height(sp_main_plash)/2;
spw = sprite_get_width(sp_main_plash)/2;
sw2 = sprite_get_width(sp_main_tile_down)*2;

cost = 0;
cost1 = 0;
cost2 = 0;
image = noone;
value = obj_shop.shop_upgrade[num,0];
name = obj_controller.l_upgr[num,0];
color = obj_controller.ore_color;
color2 = obj_controller.main_color_white;
color3 = obj_controller.main_color_grey;
color4 = noone;
ore_type = 0;
plash_img = 0;
value_string = '';
name_width = 0;
value_color = noone;
draw_set_font(obj_controller.main_font3);
add_value_length = string_width('10000000    ');
add_value = 0;

upgrade[1] = 1;
upgrade[2] = 1;
upgrade[3] = 1;
upgrade[4] = 1;

costmode = 1;
totalcost = 0;
totalcost_s = string('');
ore_picture = 1;
ore_color = obj_controller.ore_color_0;
new_color = noone;
can_buy = 0;
just_clicked = 0;

enabled = 0;

press_y = 0;

x= view_xview[0]+view_wview[0]/2;
sph2 = x-spw+sph*2+20;
sph3 = x-spw+sph*2.5;
sph4 = x-spw+sph*3;
sph5 = x+spw-sph/2+10;

step = 0;
step_width = 0;
value_step = 0;
value_width = 0;

target=0;
x_shift=0;
y_shift=0;

alarm[0]=1;

visible = 0;

surf_x=1024;
surf_y=256;
button_surf=0//surface_create(surf_x,surf_y);
can_buy=scr_canbuy();

//это раньше было в степе
/*if global.screen = 1 and obj_controller.to_shop = 0 {
    if obj_shop.y&gt;view_hview[0]/2-190+ymi-270*num {////оптимизировать
        if obj_shop.y+270*num&lt;view_hview[0]+100 {
            visible = 1; 
            y=obj_shop.y+270*num;
            if obj_controller.ore &gt;= ore_type{
                if global.ore_count/global.costmod &gt;= totalcost{
                can_buy = 1;
                } else can_buy = 0;
            } else can_buy = 0;
        }
        else visible = 0;
    }
    else visible = 0;
}
else visible = 0;



/*draw_set_halign(fa_left);
draw_set_valign(fa_middle);

draw_sprite_ext(sp_main_plash,plash_img,x,y,1,1,0,noone,1);//plashka
if just_clicked = 1 draw_sprite_ext(sp_main_plash,2,x,y,1,1,0,obj_controller.ore_color,0.25);//plashka

if can_buy draw_sprite_ext(image,0,x-spw+sph,y,1.8,1.8,0,noone,1); //image
else draw_sprite_ext(image,0,x-spw+sph,y,1.8,1.8,0,c_dkgray,0.7); //image

draw_sprite_ext(sp_main_samorodok,ore_picture,sph3,y+11,0.8,0.8,0,ore_color,1);//самородок
if can_buy draw_set_colour(obj_controller.ore_color);
else draw_set_colour(color3);

draw_set_font(obj_controller.main_font3);
     draw_text(sph4,y+10,totalcost_s);//цена
     if step &gt; 0 {
        draw_set_font(font5);
        draw_text(sph4+step_width+5,y+10-20,step);
     }  

if can_buy draw_set_colour(color2);
else draw_set_colour(color3);
draw_set_font(font28);
    draw_text(sph2,y+85,add_value);//описание
    if value_step &gt; 0 {
        //draw_text(sph2+value_width+20,y+85,obj_controller.l_persec)
        draw_set_font(font5);
        draw_text(sph2+value_width-49,y+85-20,value_step);
    }


if color4 != noone draw_set_colour(color4); //желтый цвет названия если куплены все прокачки
draw_set_font(name_font);
draw_text(sph2,y-70,string(name));//название
if plash_img{//если желтая плашка, смена руды
draw_set_font(font4_2);
draw_set_colour(value_color);
draw_text(sph2+15+name_width,y-70,value_string);//название
}

draw_set_colour(color3);
draw_set_font(font2_1);
draw_set_halign(fa_right);

draw_text(sph5,y,value);//колличество*/

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>just_clicked = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///surf
if visible {
can_buy=scr_canbuy();

scr_surf_shop();
}
alarm[4]=room_speed*1;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>obj_shop_tab</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///add_value

scr_shop_addvalue();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///totalcost

scr_shop_totalcost(num);

//добавляем новую цену в список а старую убираем
var psos=num-1;
ds_list_replace(obj_shop.cost_list_shop,psos,totalcost);

alarm[4]=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///on buy effects

alarm[4]=2;

global.ore_count -= totalcost*global.costmod;
if num != 50 obj_shop.shop_cost[num] = obj_shop.shop_cost[num]+(obj_shop.shop_cost[num]/100)*global.sperc; //покупка дорожает на процент 

scr_save_shop();
/*ini_open('Save.sav');
    ini_write_real('obj_shop_cost',string("shop_cost[")+string(num)+string("]"),obj_shop.shop_cost[num]);
ini_close();*/


if obj_shop.shop_upgrade[num,1] = 0 and num != 50//если это первая такая покупка, создается первый апгрейд таб для нее
{
scr_create_upgrade(num,1)
//obj_controller.closing_pers_mod += 0.5;//если это первая такая покупка, процент начинает копиться быстрей на 0.5
value_string = ''; //строка "переход на новую валюту" уберается
obj_controller.max_base_click += 1;
if num!= 1 and obj_controller.max_base_click &gt;= obj_controller.lvl_base_click and obj_controller.baseClickUpgradeExists= 0{
scr_create_upgrade_main(114,1)//114 2
}
        
    if num = 3{
        scr_create_upgrade_main(101,0)
    } else if num = 10{
        scr_create_upgrade_main(102,1)
    } else if num = 20{
        scr_create_upgrade_main(103,2)
    } else if num = 30{
        scr_create_upgrade_main(104,3)
    } else if num = 40{
        scr_create_upgrade_main(105,4)
    }
    
    //апгрейды множителя
    if num = 4{
        scr_create_upgrade_main(107,1)
    } else if num = 10{
        scr_create_upgrade_main(106,0)
    } else if num = 16{
        scr_create_upgrade_main(109,1)
    } else if num = 22{
        scr_create_upgrade_main(108,0)
    } else if num = 28{
        scr_create_upgrade_main(111,1)
    } else if num = 34{
        scr_create_upgrade_main(110,0)
    } else if num = 40{
        scr_create_upgrade_main(113,1)
    } else if num = 46{
        scr_create_upgrade_main(112,0)
    }
    
    //апгрейды клика х2
    if num = 1{
        /*var up14 = instance_create(0,0,obj_upgrade_tab_main ); 
        up14.num=114;
        up14.num2=1;*/
        
        obj_controller.max_base_click += 1;
            if obj_controller.max_base_click &gt;= obj_controller.lvl_base_click and obj_controller.baseClickUpgradeExists= 0{
                scr_create_upgrade_main(114,1)//114 2
            }

    } /*else if num = 21{
        var up15 = instance_create(0,0,obj_upgrade_tab_main ); 
        up15.num=115;
        up15.num2=1;
    } else if num = 35{
        var up16 = instance_create(0,0,obj_upgrade_tab_main ); 
        up16.num=116;
        up16.num2=2;
    } else if num = 49{
        var up17 = instance_create(0,0,obj_upgrade_tab_main ); 
        up17.num=117;
        up17.num2=3;
    }*/

}



// смена руды
if value = 1
{
var change = 0;
    if num = 3
    {
    obj_controller.ore = 1;
    obj_controller.ore_color = obj_controller.ore_color_1;
    obj_controller.ore_picture = 0;
    global.costmod = 1;
    change = 1;
    }
    else if num = 12
    {
    obj_controller.ore = 2;
    obj_controller.ore_color = obj_controller.ore_color_2;
    obj_controller.ore_picture = 1;
    global.costmod = 1000000;
    change = 2;
    }
    else if num = 18
    {
    obj_controller.ore = 3;
    obj_controller.ore_color = obj_controller.ore_color_3;
    obj_controller.ore_picture = 0;
    global.costmod = 1000000;
    change = 1;
    }
    else if num = 24
    {
    obj_controller.ore = 4;
    obj_controller.ore_color = obj_controller.ore_color_4;
    obj_controller.ore_picture = 1;
    global.costmod = 1000000000000;
    change = 2;
    }
    else if num = 30
    {
    obj_controller.ore = 5;
    obj_controller.ore_color = obj_controller.ore_color_5;
    obj_controller.ore_picture = 0;
    global.costmod = 1000000000000;
    change = 1;
    }
    else if num = 36
    {
    obj_controller.ore = 6;
    obj_controller.ore_color = obj_controller.ore_color_6;
    obj_controller.ore_picture = 1;
    global.costmod = 1000000000000000000;
    change = 2;
    }                
    else if num = 42
    {
    obj_controller.ore = 7;
    obj_controller.ore_color = obj_controller.ore_color_7;
    obj_controller.ore_picture = 0;
    global.costmod = 1000000000000000000;
    change = 1;
    }
    else if num = 49
    {
    obj_controller.ore = 8;
    obj_controller.ore_color = obj_controller.ore_color_8;
    obj_controller.ore_picture = 1;
    global.costmod = 1000000000000000000000000;
    change = 2;
    }
    obj_controller.alarm[3]=1;
    /*ini_open('Save.sav');
    ini_write_real('obj_controller','ore', obj_controller.ore);
    ini_close();*/
    scr_save_main();
    
    if change &gt;= 1
    {
        obj_shop.alarm[5]=1;
        with(obj_shop_tab)                
        {
        if num = other.num+1
        {
        other.new_color = ore_color;
        }
        }
    
    
        with(obj_shop_tab)                
        {
        alarm[2]=3; 
        alarm[3]=3; 
        if num &lt;= other.num //измениение цены и руды предыдущим
        {
        if other.num != 3 {
        if ore_picture = 1 ore_picture = 0;
        else ore_picture = 1;}
        ore_color = other.new_color;
        }
        }
        
            if change = 2{
            
            with(obj_shop_tab){
                if num &lt;= other.num //измениение цены и руды предыдущим
                {
                costmode*=1000000;
                if obj_shop.shop_upgrade_bonus[num]/global.costmod &lt;= 0.1 obj_shop.shop_upgrade_bonus[num] = 0.1*global.costmod;
                   //obj_shop.shop_upgrade_bonus[num]/=global.costmod;
                if obj_shop.shop_cost[num]/global.costmod &lt; 10 obj_shop.shop_cost[num] = 10*global.costmod;
                   //obj_shop.shop_cost[num]/=global.costmod;
                }
                else if num &gt; other.num
                {
                //obj_shop.shop_upgrade_bonus[num]/=global.costmod;
                //obj_shop.shop_cost/=global.costmod;
                }
                alarm[2]=4; 
                alarm[3]=4; 
                
            }
        

            with(obj_upgrade_tab){
                if cost/global.costmod &lt; 10 cost = 10*global.costmod;
                totalcost = cost/global.costmod;
                alarm[3]=5;
            }

            with obj_upgrade_tab_main{
                if cost/global.costmod &lt; 10 cost = 10*global.costmod;
                totalcost = cost/global.costmod;
                alarm[3]=5;
            }
            
            obj_shop.alarm[1]=6; // saving costs
            
            }
    }
    
    //апгрейды буста
    /*if obj_shop.shop_upgrade_main[num] = 0{
    if num = 3{
        var up1 = instance_create(0,0,obj_upgrade_tab_main );
        up1.num = 101;
        up1.num2 = 0;
    } else if num = 10{
        var up2 = instance_create(0,0,obj_upgrade_tab_main ); 
        up2.num=102;
        up2.num2=1;
    } else if num = 20{
        var up3 = instance_create(0,0,obj_upgrade_tab_main ); 
        up3.num=103; 
        up3.num2=2;
    } else if num = 30{
        var up4 = instance_create(0,0,obj_upgrade_tab_main ); 
        up4.num=104;
        up4.num2=3;
    } else if num = 40{
        var up5 = instance_create(0,0,obj_upgrade_tab_main ); 
        up5.num=105;
        up5.num2=4;
    }
    
    //апгрейды множителя
    if num = 4{
        var up7 = instance_create(0,0,obj_upgrade_tab_main ); 
        up7.num=107;
        up7.num2=1;
    } else if num = 10{
        var up6 = instance_create(0,0,obj_upgrade_tab_main ); 
        up6.num=106;
        up6.num2=0;
    } else if num = 16{
        var up9 = instance_create(0,0,obj_upgrade_tab_main ); 
        up9.num=109;
        up9.num2=1;
    } else if num = 22{
        var up8 = instance_create(0,0,obj_upgrade_tab_main ); 
        up8.num=108;
        up8.num2=0;
    } else if num = 28{
        var up11 = instance_create(0,0,obj_upgrade_tab_main ); 
        up11.num=111;
        up11.num2=1;
    } else if num = 34{
        var up10 = instance_create(0,0,obj_upgrade_tab_main ); 
        up10.num=110;
        up10.num2=0;
    } else if num = 40{
        var up13 = instance_create(0,0,obj_upgrade_tab_main ); 
        up13.num=113;
        up13.num2=1;
    } else if num = 46{
        var up12 = instance_create(0,0,obj_upgrade_tab_main ); 
        up12.num=112;
        up12.num2=0;
    }
    
    //апгрейды клика х2
    if num = 1{
        var up14 = instance_create(0,0,obj_upgrade_tab_main ); 
        up14.num=114;
        up14.num2=1;
    } /*else if num = 21{
        var up15 = instance_create(0,0,obj_upgrade_tab_main ); 
        up15.num=115;
        up15.num2=1;
    } else if num = 35{
        var up16 = instance_create(0,0,obj_upgrade_tab_main ); 
        up16.num=116;
        up16.num2=2;
    } else if num = 49{
        var up17 = instance_create(0,0,obj_upgrade_tab_main ); 
        up17.num=117;
        up17.num2=3;
    }}*/
}

if global.sound = 1{
    var snd = snd_8bit_back;
    audio_play_sound(snd, 1, 0);
    audio_sound_pitch(snd, random_range(0.7,1.1));
}

//save
obj_controller.alarm[3]=6;
obj_controller.alarm[6]=7;


var pluss = obj_shop.shop_upgrade_bonus[num]; // на это в след. двух строчках увеличаваются р.п.с. и р.п.т.
global.ore_per_second += pluss;
//global.ore_per_click += ((pluss/100)*global.pperc);
global.add_click += ((pluss/100)*global.pperc);
global.ore_per_click = global.base_click+global.add_click ;

obj_shop.alarm[2]=1;

alarm[2]=1; 
alarm[3]=1; 
//obj_shop.alarm[2]=3;


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///start effects


value = obj_shop.shop_upgrade[num,0];
name = obj_controller.l_upgr[num,0];
draw_set_font(font4);
name_width = string_width(name);

if name_width &gt; 780 name_font = font4_1;

//description 1= за секунду, 2= за тап, 3= к скорости роста бонуса

ore_picture = 1;
ore_color = obj_controller.ore_color_0;

switch (num)
{
case 1: image = sp_upgrade_1;   ore_type = 0; ore_picture = 0;  ore_color = obj_controller.ore_color_0;  costmode = 1;                 cost1 = 10;   break;
case 2: image = sp_upgrade_2;   ore_type = 0; ore_picture = 0;  ore_color = obj_controller.ore_color_0;  costmode = 1;                 cost1 = 150;   break;
case 3: image = sp_upgrade_3;   ore_type = 0; ore_picture = 0;  ore_color = obj_controller.ore_color_0;  costmode = 1;                 cost1 = 1000;   break;
case 4: image = sp_upgrade_4;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 5000;   break;
case 5: image = sp_upgrade_5;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 20000;   break;
case 6: image = sp_upgrade_6;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 100000;    break;
case 7: image = sp_upgrade_7;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 500000;   break;
case 8: image = sp_upgrade_8;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 2500000;   break;
case 9: image = sp_upgrade_9;   ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 10000000;   break;
case 10: image = sp_upgrade_10; ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 50000000;   break;

case 11: image = sp_upgrade_11; ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 250000000;break;
case 12: image = sp_upgrade_12; ore_type = 1; ore_picture = 0;  ore_color = obj_controller.ore_color_1;  costmode = 1;                 cost1 = 1000000000; break;
case 13: image = sp_upgrade_13; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 5000000000;break;
case 14: image = sp_upgrade_14; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 25000000000; break;
case 15: image = sp_upgrade_15; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 100000000000; break;
case 16: image = sp_upgrade_16; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 500000000000; break;
case 17: image = sp_upgrade_17; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 2500000000000; break;
case 18: image = sp_upgrade_18; ore_type = 2; ore_picture = 1;  ore_color = obj_controller.ore_color_2;  costmode = 10000;             cost1 = 10000000000000; break;
case 19: image = sp_upgrade_19; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 50000000000000; break;
case 20: image = sp_upgrade_20; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 250000000000000;break;

case 21: image = sp_upgrade_21; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 1000000000000000;  break;
case 22: image = sp_upgrade_22; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 5000000000000000;  break;
case 23: image = sp_upgrade_23; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 25000000000000000;  break;
case 24: image = sp_upgrade_24; ore_type = 3; ore_picture = 0;  ore_color = obj_controller.ore_color_3;  costmode = 10000;             cost1 = 100000000000000000;  break;
case 25: image = sp_upgrade_25; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 500000000000000000;  break;
case 26: image = sp_upgrade_26; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 2500000000000000000; break;
case 27: image = sp_upgrade_27; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 10000000000000000000;  break;
case 28: image = sp_upgrade_28; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 50000000000000000000;  break;
case 29: image = sp_upgrade_29; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 250000000000000000000;  break;
case 30: image = sp_upgrade_30; ore_type = 4; ore_picture = 1;  ore_color = obj_controller.ore_color_4;  costmode = 100000000;         cost1 = 1000000000000000000000; break;

case 31: image = sp_upgrade_31; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 5000000000000000000000;   break;
case 32: image = sp_upgrade_32; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 25000000000000000000000;   break;
case 33: image = sp_upgrade_33; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 100000000000000000000000;   break;
case 34: image = sp_upgrade_34; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 500000000000000000000000;   break;
case 35: image = sp_upgrade_35; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 2500000000000000000000000;  break;
case 36: image = sp_upgrade_36; ore_type = 5; ore_picture = 0;  ore_color = obj_controller.ore_color_5;  costmode = 100000000;         cost1 = 10000000000000000000000000;    break;
case 37: image = sp_upgrade_37; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 50000000000000000000000000;  break;
case 38: image = sp_upgrade_38; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 250000000000000000000000000;  break;
case 39: image = sp_upgrade_39; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 1000000000000000000000000000;   break;
case 40: image = sp_upgrade_40; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 5000000000000000000000000000;  break;

case 41: image = sp_upgrade_41; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 25000000000000000000000000000;break;
case 42: image = sp_upgrade_42; ore_type = 6; ore_picture = 1;  ore_color = obj_controller.ore_color_6;  costmode = 1000000000000;     cost1 = 100000000000000000000000000000;  break;
case 43: image = sp_upgrade_43; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 500000000000000000000000000000;break;
case 44: image = sp_upgrade_44; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 2500000000000000000000000000000; break;
case 45: image = sp_upgrade_45; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 10000000000000000000000000000000; break;
case 46: image = sp_upgrade_46; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 50000000000000000000000000000000; break;
case 47: image = sp_upgrade_47; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 250000000000000000000000000000000;break;
case 48: image = sp_upgrade_48; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_7;  costmode = 1000000000000;     cost1 = 1000000000000000000000000000000000;break;
case 49: image = sp_upgrade_49; ore_type = 7; ore_picture = 0;  ore_color = obj_controller.ore_color_8;  costmode = 10000000000000000; cost1 = 5000000000000000000000000000000000;break;
case 50: image = sp_upgrade_50; ore_type = 8; ore_picture = 1;  ore_color = obj_controller.ore_color_8;  costmode = 10000000000000000; cost1 = 25000000000000000000000000000000000; color4 = obj_controller.main_color; break;

default: image = sp_upgrade_3; cost = 10000;  
};

cost = obj_shop.shop_cost[num];

if num = 12 or num = 24 or num = 36 or num = 49 {
    plash_img = 1;
    if (num = 12 or num = 24 or num = 36 or num = 49) and value = 0 {value_string = obj_controller.l_switch;}
         if num = 3  value_color = obj_controller.ore_color_1;
    else if num = 12 value_color = obj_controller.ore_color_2;
    else if num = 18 value_color = obj_controller.ore_color_3;
    else if num = 24 value_color = obj_controller.ore_color_4;
    else if num = 30 value_color = obj_controller.ore_color_5;
    else if num = 36 value_color = obj_controller.ore_color_6;
    else if num = 42 value_color = obj_controller.ore_color_7;
    else if num = 49 value_color = obj_controller.ore_color_8;
}

if ore_type &lt; obj_controller.ore {
    ore_type = obj_controller.ore;
    ore_color = obj_controller.ore_color;
    ore_picture = obj_controller.ore_picture;
}

if obj_shop.shop_upgrade[num,0] != 0{

for(var i=0; i&lt;obj_shop.shop_upgrade[num,0]; i++){
    cost = cost+round((cost/100)*global.sperc);
}
}


if num &lt; 50 
{if obj_shop.shop_upgrade[num,1] &gt;= 1{
    if obj_shop.shop_upgrade[num,1] = 1{
        scr_create_upgrade(num,1)
    }
    else if obj_shop.shop_upgrade[num,2] = 1{
        scr_create_upgrade(num,2)
    }
    else if obj_shop.shop_upgrade[num,3] = 1{
        scr_create_upgrade(num,3)
    }
    else if obj_shop.shop_upgrade[num,4] = 1{
        scr_create_upgrade(num,4)
    }

    if obj_shop.shop_upgrade[num,1] = 2 {upgrade[1] = 2; obj_shop.shop_upgrade_bonus[num]*=2;}
    if obj_shop.shop_upgrade[num,2] = 2 {upgrade[2] = 2; obj_shop.shop_upgrade_bonus[num]*=2;}
    if obj_shop.shop_upgrade[num,3] = 2 {upgrade[3] = 2; obj_shop.shop_upgrade_bonus[num]*=2;}
    if obj_shop.shop_upgrade[num,4] = 2 {upgrade[4] = 2; obj_shop.shop_upgrade_bonus[num]*=2;color4 = obj_controller.main_color;}
}
}


alarm[2]=1; 
alarm[3]=1; 








</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if visible = 1
{
if y=press_y and global.popup_open = 0 and mouse_y &gt; view_hview/2 +10
{
    if can_buy//куплено
    {
    obj_controller.own_items += 1;
    if obj_shop.shop_upgrade[num,0] = 0 //если это первая такая покупка, создается первый апгрейд таб для нее
    {
    obj_controller.unic_items += 1;
    }
    obj_shop.shop_upgrade[num,0]+=1;
    var key = string('shop_upgrade[')+string(num)+string(',0]');
    /*ini_open('Save.sav');
    ini_write_real('obj_shop',key,obj_shop.shop_upgrade[num,0]);
    ini_write_real('obj_controller','own_items', obj_controller.own_items);
    ini_write_real('obj_controller','unic_items', obj_controller.unic_items);
    ini_close();*/
    scr_save_main();
    value += 1;
    alarm[1]=1;
    
    just_clicked = 1;
    alarm[10]=7;
    }
}
press_y = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if visible = 1
{
press_y = y;
}



</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if surface_exists(button_surf) draw_surface(button_surf,x-surf_x/2,y-surf_y/2);
else alarm[4]=1;

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>504,121</point>
    <point>504,504</point>
  </PhysicsShapePoints>
</object>
